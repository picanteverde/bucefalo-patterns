var bucefalo=bucefalo||{};bucefalo.patterns=bucefalo.patterns||{},bucefalo.namespace||(bucefalo.namespace=function(a,b){var c,d,e,f,g=function(){return this}();c=g,d=a.split("."),b===undefined&&(b={}),e=d.length;for(f=0;f<e;f+=1)c.hasOwnProperty(d[f])||(f===e-1?c[d[f]]=b:c[d[f]]={}),c=c[d[f]]}),bucefalo.namespace("bucefalo.patterns.publisherSubscriber.pubSub",{Publisher:function(){var a=[],b=function(a,b){return function(){a(b)}};this.subscribe=function(b,c){a.hasOwnProperty(b)||(a[b]=[]),a[b].push(c)},this.unsubscribe=function(b,c){if(!a.hasOwnProperty(b))return;var d=a[b].indexOf(c);d&&a[b].splice(d,1)},this.notify=function(c,d){var e;if(!a.hasOwnProperty(c))return;e=a[c].length;while(e--)setTimeout(b(a[c][e],d),0)}}}),bucefalo.namespace("bucefalo.patterns.publisherSubscriber.asyncEventManager",{createEventManager:function(){var a={};return{subscribe:function(b,c){a.hasOwnProperty(b)||(a[b]=[]),a[b].push(c)},publish:function(b,c){var d,e,f,g,h,i=function(a,b){setTimeout(function(){a(b)},0)};if(a.hasOwnProperty(b)){f=a[b],h=f.length;for(e=0;e<h;e+=1)g=f[e],i(g,c)}}}}}),bucefalo.namespace("bucefalo.patterns.publisherSubscriber.eventManager",{createEventManager:function(){var a={};return{subscribe:function(b,c){a.hasOwnProperty(b)||(a[b]=[]),a[b].push(c)},publish:function(b,c){var d,e,f,g,h;if(a.hasOwnProperty(b)){f=a[b],h=f.length;for(e=0;e<h;e+=1)g=f[e],g(c)}}}}}),bucefalo.namespace("bucefalo.patterns.keyObserver",{observable:function(a){var b={};return a.setter=function(c,d){var e,f;a[c]=d,e=b[c];if(e!==undefined)for(f=e.length-1;f>=0;f--)e[f](d)},a.getter=function(b){return a[b]},a.subscribe=function(a,c,d){b.hasOwnProperty(d)||(b[d]=[]),b[d].push(function(b){a[c](b)})},a}});